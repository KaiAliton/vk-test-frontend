import{j as s,L as g,r as t,A as f,a as w,u as y}from"./index-20bbc2da.js";import{R as u}from"./ResponseGrid-f3ddb5f8.js";import{T as c,A as p,P as F}from"./AddPostPanel-834ab8a9.js";function P(l){var d,i,e;return s.jsx("div",{children:s.jsxs("div",{className:"flex flex-row items-center",children:[s.jsx("img",{src:`${(d=l.user)==null?void 0:d.avatar}`,className:"rounded-full w-20 p-2"}),s.jsx(g,{to:`/user/${(i=l.user)==null?void 0:i.id}`,children:(e=l.user)==null?void 0:e.username})]})})}function $(){const{user:l}=t.useContext(f),[d,i]=t.useState([]),[e,h]=t.useState(null),[n,j]=t.useState([]),[r,N]=t.useState(!0),[v,m]=t.useState(),o=w().id,x=y();t.useEffect(()=>{x.get(`/api/v1/user/${o}/overview/`).then(a=>{i(a.data.posts),h(a.data.user),j(a.data.friends),m(a.data.user.isFriend),N(!1)})},[o]);const b=()=>{x.post(`/api/v1/user/${e==null?void 0:e.id}/add_friend/`).then(a=>{m(a.data.user.isFriend)})};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"profile-card my-5 card w-full shadow-lg items-center bg-primary h-96",children:[r?s.jsx("div",{className:"w-full rounded-xl h-full bg-accent"}):s.jsx("figure",{children:s.jsx("img",{src:"https://loremflickr.com/3440/1440?random=1",className:" ",alt:""})}),s.jsxs("div",{className:"card-body flex-col items-center",children:[s.jsx("div",{className:"avatar -mt-16",children:s.jsx("div",{className:"rounded-full outline outline-4 outline-primary w-24",children:r?s.jsx("div",{className:"w-full h-full bg-accent"}):s.jsx("img",{src:e==null?void 0:e.avatar,alt:""})})}),r?s.jsx("div",{className:"h-2.5 bg-accent rounded-full  w-48 mb-4"}):s.jsxs("div",{className:"text-xl font-bold flex-col gap-2 flex",children:[s.jsx("span",{className:"text-center",children:e==null?void 0:e.username}),(l==null?void 0:l.id)!=(e==null?void 0:e.id)?s.jsx("button",{className:"btn-sm btn-accent rounded-xl",onClick:b,children:v?"Удалить из друзей":"Добавить в друзья"}):null,s.jsx("label",{htmlFor:"my-modal",className:"btn-sm btn-accent rounded-xl text-center",children:"Подробнее"}),s.jsx("input",{type:"checkbox",id:"my-modal",className:"modal-toggle"}),s.jsx("div",{className:"modal z-20",children:s.jsxs("div",{className:"modal-box bg-primary",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs(c,{children:["О себе: ",e==null?void 0:e.bio]}),s.jsxs(c,{children:["Город: ",e==null?void 0:e.city]}),s.jsxs(c,{children:["День рождения: ",e==null?void 0:e.birthday]})]}),s.jsx("div",{className:"modal-action",children:s.jsx("label",{htmlFor:"my-modal",className:"btn",children:"О как!"})})]})})]})]})]}),s.jsxs("div",{className:"flex flex-row",children:[s.jsxs(u,{orientation:"list",className:"w-2/3 mr-5",children:[(l==null?void 0:l.id)==(e==null?void 0:e.id)?s.jsx(p,{}):null,d==null?void 0:d.map(a=>s.jsx(F,{post:a},a.id))]}),s.jsx("div",{className:"w-1/3 h-full",children:(n==null?void 0:n.length)===0?s.jsx(c,{children:"У этого пользователя пока нет друзей."}):s.jsxs(u,{orientation:"list",className:"w-full bg-primary rounded-xl outline outline-1 outline-accent",children:[s.jsx(c,{children:"Друзья"}),n==null?void 0:n.map(a=>s.jsx(P,{user:a},a.id))]})})]})]})}export{$ as default};

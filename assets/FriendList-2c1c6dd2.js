import{u as o,j as e,L as x,r as i,A as m}from"./index-3b12884d.js";import{R as h}from"./ResponseGrid-2df20f33.js";function f(s){var c,d,n,l,t;const r=o(),a=async()=>{var u;await r.post(`/api/v1/user/${(u=s.user)==null?void 0:u.id}/add_friend/`),location.reload()};return e.jsx("div",{children:e.jsxs("div",{className:"flex flex-row items-center p-2",children:[(c=s.user)!=null&&c.avatar?e.jsx("img",{src:`${(d=s.user)==null?void 0:d.avatar}`,className:"rounded-full w-20 p-2"}):e.jsx("div",{className:"w-20 h-20 p-2",children:e.jsx("div",{className:"bg-accent rounded-full w-full h-full"})}),e.jsx(x,{to:`/user/${(n=s.user)==null?void 0:n.id}`,className:"grow text-start",children:(l=s.user)==null?void 0:l.username}),e.jsx("button",{className:"btn-sm btn-accent rounded-xl",onClick:a,children:(t=s.user)!=null&&t.isFriend?"Удалить из друзей":"Добавить в друзья"})]})})}class j extends i.Component{render(){const{value:r,handleSearch:a}=this.props;return e.jsx("div",{className:"form-control mt-5",children:e.jsx("input",{type:"text",value:r,onChange:a,placeholder:"Найти друзей",className:"input input-bordered  bg-accent"})})}}function g(){const[s,r]=i.useState(void 0),{user:a}=i.useContext(m),[c,d]=i.useState(""),n=o();i.useEffect(()=>{n.get(`/api/v1/user/${a==null?void 0:a.id}/friends/`).then(t=>{r(t.data)})},[]);const l=async t=>{d(t.target.value),n.get(`/api/v1/user/?search=${t.target.value}`).then(u=>{r(u.data.results)})};return e.jsxs(e.Fragment,{children:[e.jsx(j,{value:c,handleSearch:l}),e.jsx(h,{orientation:"list",className:" bg-primary rounded-2xl mt-5",children:s==null?void 0:s.map(t=>e.jsx(f,{user:t},t.id))})]})}export{g as default};
